# 深度学习环境配置

经尝试，Jetson 系列的系统无法正常安装 anaconda，实验使用的 Python 环境为系统默认 Python 环境

## 安装包

以下介绍基于 Python3.8 的 torch 环境的主要安装包，除了**安装过程**章节介绍的安装方法外，其余的一些包基本可以通过 pip 命令进行安装：

- torch：1.11.0


- torchaudio：0.11.0


- onnxruntime-gpu：1.12.1


- swig-decoders：1.1


- kaldifeat：1.21


## 安装过程

**torch 和 onnxruntime-gpu**

进入https://elinux.org/Jetson_Zoo，找到对应版本的Pytorch和ONNXRuntime，选择对应的版本进行下载。验证torch 是否正常安装：


```shell
$ python3

>>> import torch
>>> torch.cuda.is_available()
True
```

**torchaudio**

pypi官网暂不提供torchaudio 0.11.0版本的离线安装包，仅能使用源码进行安装，在安装 torchaudio 之前，首先需要安装 **ninja**。

ninja的安装及编译：

```shell
git clone git://github.com/ninja-build/ninja.git && cd ninja
./configure.py --bootstrap
cp ninja /usr/bin

# 查看版本
$ ninja --version
1.10.0
```

之后安装相关依赖依赖

```shell
sudo apt install ffmpeg libavformat-dev libavcodec-dev libavutil-dev libavdevice-dev libavfilter-dev
```

构建Torchaudio：

```shell
git clone https://github.com/pytorch/audio
cd audio
USE_CUDA=1 USE_FFMPEG=1 pip install -v -e . --no-use-pep517

# 测试
>>> import torchaudio
>>> print(torchaudio.__version__)
0.11.0+820b383
```

**swig-decoders**

```shell
git clone https://github.com/Slyne/ctc_decoder.git
cd ctc_decoder/swig
bash setup.sh
```

**kaldifeat**

```shell
git clone https://github.com/csukuangfj/kaldifeat
cd kaldifeat
python3 setup.py install

# 测试
>>> import kaldifeat
>>> print(kaldifeat.__version__)
1.21
```



